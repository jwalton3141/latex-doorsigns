% Set door sign size
\usepackage[paperwidth=13.9cm, paperheight=11cm, top=0cm]{geometry}

% Load that sweet MinionPro font (if installed)
\IfFileExists{MinionPro.sty}{%
	\usepackage{MinionPro}
}

\usepackage{tikz}
\usepackage[pscoord]{eso-pic}
\usepackage{xfp}
\usepackage{etoolbox}

% Stolen from Werner https://tex.stackexchange.com/a/24675/181010
% \placetextbox{proportion of width}{proportion of height}{text}
\newcommand{\placetextbox}[3]{% 
    \setbox0=\hbox{#3}
    \AddToShipoutPictureFG*{%
        \put(\LenToUnit{#1\paperwidth},\LenToUnit{#2\paperheight}){\vtop{{\null}\makebox[0pt][l]{#3}}}%
  }
}

% \doortitle{room number}
\newcommand{\doortitle}[1]{\centering \Huge #1}

% \student{column number (1 or 2)}{row number (1, 2, 3 or 4)}{name 1}{name 2}{path to image}
\newcommand{\student}[5]{%
    % If one name is passed set on a single line. If two names passed set on separate lines
    \ifstrempty{#4}{\singlename{#1}{#2}{#3}{#5}}{\doublename{#1}{#2}{#3}{#4}{#5}}
}

\newcommand{\singlename}[4]{%
    % Add name to sign
    \placetextbox{\namecol{#1}}{\midrow{#2}}{\huge #3}
    % If given, add image to sign
    \ifstrempty{#4}{}{\placetextbox{\imcol{#1}}{\midrow{#2}}{\addimage{#4}}}
}

\newcommand{\doublename}[5]{%
    % Add first name to sign
    \placetextbox{\namecol{#1}}{\hirow{#2}}{\huge #3}
    % Add second name to sign
    \placetextbox{\namecol{#1}}{\lowrow{#2}}{\normalsize #4}
    % If given, add image to sign
    \ifstrempty{#5}{}{\placetextbox{\imcol{#1}}{\midrow{#2}}{\addimage{#5}}}
}

\newcommand{\addimage}[1]{%
    \includegraphics[width=1.6cm, height=1.6cm]{#1}
}


% \background{opacity (0-1)}{path to background}
\newcommand{\background}[2]{%
        \tikz[remember picture, overlay] \node[opacity=#1, inner sep=0pt] at (current page.center){\includegraphics[width=\paperwidth, height=\paperheight]{#2}};
}

% Locations of columns for names
\newcommand{\namecol}[1]{%
	\ifnum#1=1
		0.2
	\fi
	\ifnum#1=2
		0.6
	\fi
}

% Locations of columns for images
\newcommand{\imcol}[1]{%
	\ifnum#1=1
		0.05
	\fi
	\ifnum#1=2
		0.835
	\fi
}

% Row locations 
\newcommand{\midrow}[1]{%
	\ifnum#1=1
		0.8
	\fi
	\ifnum#1=2
		0.6
	\fi
	\ifnum#1=3
		0.4
	\fi
	\ifnum#1=4
		0.2
	\fi
}

% Lower row locations
\newcommand{\lowrow}[1]{%
    \fpeval{\midrow{#1}-0.025}
}

% Upper row locations
\newcommand{\hirow}[1]{%
    \fpeval{\midrow{#1}+0.025}
}

% No page numbers thanks
\pagenumbering{gobble}
